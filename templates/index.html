<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hand mailer</title>
    <link rel="stylesheet" href="/assets/css/bootstrap-grid.css">
    <link rel="stylesheet" href="/assets/css/bootstrap-reboot.css">
    <link rel="stylesheet" href="/assets/css/bootstrap.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="shortcut icon" href="/assets/favicon.png" type="image/png">
    <div class="components">

        <div class="component emailConfig">
            <div class="form-group">
                <label>Mailbox config</label>
                <form @submit.prevent="save">
                    <input type="text" placeholder="Sender" class="form-control w-25 mb-1" v-model="data.sender">
                    <input type="text" placeholder="SMTP host" class="form-control w-25 mb-1" v-model="data.host">
                    <input type="text" placeholder="SMTP port" class="form-control w-25 mb-1" v-model="data.port">
                    <input type="text" placeholder="Username" class="form-control w-25 mb-1" v-model="data.username">
                    <input type="password" placeholder="Password" class="form-control w-25 mb-1" v-model="data.password">
                    <button type="submit" class="btn btn-success" class="form-control w-25 mb-1">Save</button>
                </form>
            </div>
        </div>
        
        <div class="component userlists">

            <div class="overlay" v-if="isEdit">
                <div class="bg">
                    <button class="btn btn-success" @click="save">Save</button>
                    <button class="btn btn-danger" @click="rm">Delete</button>
                    <button class="btn btn-info" @click="close">Close</button>
                    <div class="form-group"> 
                        <label>/% editName %/</label>
                        <textarea class="form-control" rows="10" v-model="editText"></textarea>
                    </div>
                </div>
            </div>
            
            <form @submit.prevent="submit">
                <div class="form-group">
                  <label>Choose type:</label>
                  <select class="form-control" v-model="input" v-model="data.option">
                    <option value="1">Import file</option>
                    <option value="2">Add manualy</option>
                  </select>
                </div>
                <div class="form-group" v-if="input == 2">
                    <label>Type name</label>
                    <input type="text" class="form-control" v-model="data.name">
                </div>
                <div class="form-group" v-if="input == 1">
                    <label>Choose file</label>
                    <input type="file" class="form-control-file" ref="file">
                </div>
                <div class="form-group" v-else> 
                    <label>Type users emails, 1 line = 1 email</label>
                    <textarea class="form-control" rows="10" v-model="data.text"></textarea>
                </div>
                <button type="submit" class="btn btn-success">Submit</button>
            </form>

            <p class="h3 text-center">
                Lists (click to change):
            </p>
            <ul v-if="render">
                <li v-for="(li, name) in getData" :key="name" @click="edit(name)">/% name %/ (/% li.length %/)</li>
            </ul>
        </div>

        <div class="component createMailing">
            <div v-if="stage == 1">
                <form @submit.prevent="send">
                    <div class="form-group">
                        <label>Choose users list:</label>
                        <select class="form-control" v-model="ul">
                          <option v-for="(l, name) in storage.ul" :key="name" :value="name">/% name %/</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Type subject</label>
                        <input type="text" class="form-control" v-model="subject">
                    </div>
                    <div class="form-group">
                        <label>Type e-mail text</label>
                        <textarea class="form-control" rows="10" v-model="text"></textarea>
                    </div>
                    <button type="submit" class="btn btn-success">Send</button>
                </form>
            </div>
            <div v-else>
                Sending... <br>
                <button class="btn btn-danger">Don't wait</button>
            </div>
        </div>

        <div class="component template">
            t
        </div>
    </div>
</head>
<body>
    
    <div class="row" id="app">
        <div class="col-2 menu">
            <ul>
                <li class="h5">
                    <router-link to="config">Mailbox config</router-link>
                </li>
                <li class="h5">
                    <router-link to="mailing">Create mailing</router-link>
                </li>
                <li class="h5">
                    <router-link to="userlists">Manage users lists</router-link>
                </li>
                <li class="h5">
                    <router-link to="templates">Manage templates</router-link>
                </li>
            </ul>
        </div>
        <div class="col-1"></div>
        <div class="col-9 window">
            <router-view></router-view>
        </div>
    </div>

    <script>'use strict';</script>
    <script src="/assets/js/jq.js" defer></script>
    <script src="/assets/js/bootstrap.min.js" defer></script>
    <script src="/assets/js/vue.js" defer></script>
    <script src="/assets/js/router.js" defer></script>
    <script src="/assets//js/components.js" defer></script>
    <script src="/assets/js/routes.js" defer></script>
    <script src="/assets/js/script.js" defer></script>
</body>
</html>